[manifest]
version = "1.0.0"
dump_lua = true
priority = 0

[[patches]]
[patches.pattern]
target = '''functions/UI_definitions.lua'''
pattern = '''{n=G.UIT.R, config={align = "cm", padding = 0.08}, nodes={
UIBox_button({button = 'exit_overlay_menu', label = {localize('b_endless')}, minw = 6.5, maxw = 5, minh = 1.2, scale = 0.7, shadow = true, colour = G.C.BLUE, focus_args = {nav = 'wide', button = 'x',set_button_pip = true}}),'''
position = "at"
payload = '''
(not G.GAME.seeded) and {n=G.UIT.R, config={align = "cm", padding = 0.08}, nodes={
    {n=G.UIT.C, config={padding = 0.05, minw = 0, minh = 0.61, align = "cl"}, nodes={
        {n=G.UIT.O, config={object = DynaText({string = {" "..localize{type = 'variable', key = 'hpot_creinterest', vars = {1, 5}}}, colours = {G.C.UI.TEXT_LIGHT}, shadow = true, pop_in = 0, scale = 0.3, silent = true})}}
    }},
    {n=G.UIT.C, config={padding = 0.05, minw = 0, minh = 0.61, align = "cl"}, nodes={
        {n=G.UIT.T, config={text = "c." .. math.floor(to_big(G.GAME.budget) / to_big(5)), scale = 0.4, colour = G.C.PURPLE, shadow = true, juice = true}}
    }},
}},
{n=G.UIT.R, config={align = "cm", padding = 0.08}, nodes={
UIBox_button({button = 'exit_overlay_menu', label = {localize('b_endless')}, minw = 6.5, maxw = 5, minh = 1.2, scale = 0.7, shadow = true, colour = G.C.BLUE, focus_args = {nav = 'wide', button = 'x',set_button_pip = true}}),
'''
match_indent = true

[[patches]]
[patches.pattern]
target = '''functions/UI_definitions.lua'''
pattern = '''function create_UIBox_win()'''
position = "after"
payload = '''
    if not G.GAME.seeded then
        G.PROFILES[G.SETTINGS.profile].TNameCredits = to_big(G.PROFILES[G.SETTINGS.profile].TNameCredits) + math.floor(to_big(G.GAME.budget) / to_big(5))
    end
'''
match_indent = true

